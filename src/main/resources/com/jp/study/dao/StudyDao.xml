<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jp.study.dao.StudyDao">

	<resultMap id="BaseMap" type="com.jp.study.entity.ShohinEntity">
		<id column="SHOHIN_CD" property="shohinCd" />
		<result column="COLOR" property="color" />
		<result column="ZEINUKIGAKU" property="zeinukiGaku" />
		<result column="ZEIGAKU" property="zeiGaku" />
		<result column="ZEIKOMIGAKU" property="zeikomiGaku" />
		<result column="MAKE_TIME" property="makeTime" />
		<result column="ZAIRYO_MEMO" property="zairyoMemo" />
		<result column="SHOHIN_MEMO" property="shohinMemo" />
		<result column="DELETE_FLAG" property="deleteFlag" />
		<result column="CREATE_DATE" property="createDate" />
		<result column="UPDATE_DATE" property="updateDate" />
	</resultMap>
	
	
	<select id="findAllShohinList" parameterType="map" resultMap="BaseMap">
		SELECT * FROM N_SHOHIN
	</select>
	
	<select id="selectByPrimaryShohin">
		SELECT
			ZEINUKIGAKU,
			ZEIGAKU,
			ZEIKOMIGAKU
		FROM 
			N_SHOHIN
		WHERE
			SHOHIN_CD = #{shohinCd}
		AND DELETE_FLAG = '0'
	</select>
	
	<select id="selectByLastShohinCd" resultType="string">
		SELECT 
			SHOHIN_CD
		FROM
			N_SHOHIN
		WHERE COLOR = #{color}
		ORDER BY SHOHIN_CD DESC
		LIMIT 1
	</select>
	
	<insert id="insertShohin">
		INSERT INTO N_SHOHIN
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="shohinCd != null">
				SHOHIN_CD,
			</if>
			<if test="color != null">
				COLOR,
			</if>
			<if test="zeinukiGaku != null">
				ZEINUKIGAKU,
			</if>
			<if test="zeiGaku != null">
				ZEIGAKU,
			</if> 
			<if test="zeikomiGaku != null">
				ZEIKOMIGAKU,
			</if>
			<if test="makeTime != null">
				MAKE_TIME,
			</if>
			<if test="zairyoMemo != null">
				ZAIRYO_MEMO,
			</if>
			<if test="shohinMemo != null">
				SHOHIN_MEMO,
			</if>
			DELETE_FLAG,
			CREATE_DATE,
			UPDATE_DATE
		</trim>
		VALUES
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="shohinCd != null">
				#{shohinCd},
			</if>
			<if test="color != null">
				#{color},
			</if>
			<if test="zeinukiGaku != null">
				#{zeinukiGaku},
			</if>
			<if test="zeiGaku !=null ">
				#{zeiGaku},
			</if>
			<if test="zeikomiGaku != null">
				#{zeikomiGaku},
			</if>
			<if test="makeTime != null">
				#{makeTime},
			</if>
			<if test="zairyoMemo != null">
				#{zairyoMemo},
			</if>
			<if test="shohinMemo != null">
				#{shohinMemo},
			</if>
			'0',
            CURRENT_TIMESTAMP,
            CURRENT_TIMESTAMP
		</trim>
	</insert>

</mapper>
